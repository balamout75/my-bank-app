<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Bank - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <div class="container mt-5">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="row mb-4">
            <div class="col">
                <h1 class="text-primary">
                    üè¶ My Bank
                </h1>
                <p class="text-muted">
                    –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, 
                    <strong th:text="${pageModel.account.firstName + ' ' + pageModel.account.lastName}">–ò–º—è –§–∞–º–∏–ª–∏—è</strong>!
                </p>
            </div>
            <div class="col text-end">
                <a href="/logout" class="btn btn-outline-secondary">–í—ã—Ö–æ–¥</a>
            </div>
        </div>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ –∏ –æ—à–∏–±–∫–∞—Ö -->
        <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>‚úì –£—Å–ø–µ—à–Ω–æ!</strong> <span th:text="${successMessage}">–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
            <strong>‚úó –û—à–∏–±–∫–∞!</strong> <span th:text="${errorMessage}">–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ -->
        <div class="card mb-4 shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ</h5>
            </div>
            <div class="card-body">
                <form th:action="@{/account/update}" method="post" th:object="${updateForm}">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">–ò–º—è</label>
                            <input type="text" 
                                   class="form-control" 
                                   th:field="*{firstName}"
                                   th:value="${pageModel.account.firstName}"
                                   required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">–§–∞–º–∏–ª–∏—è</label>
                            <input type="text" 
                                   class="form-control" 
                                   th:field="*{lastName}"
                                   th:value="${pageModel.account.lastName}"
                                   required>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                            <input type="date" 
                                   class="form-control" 
                                   th:field="*{dateOfBirth}"
                                   th:value="${pageModel.account.dateOfBirth}"
                                   required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">–ë–∞–ª–∞–Ω—Å</label>
                            <input type="text" 
                                   class="form-control form-control-lg fw-bold text-success" 
                                   th:value="${#numbers.formatDecimal(pageModel.account.balance, 1, 2)} + ' ‚ÇΩ'"
                                   readonly>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                    </button>
                </form>
            </div>
        </div>

        <!-- –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–µ–Ω—å–≥–∞–º–∏ -->
        <div class="card mb-4 shadow-sm">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">üí∞ –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–µ–Ω—å–≥–∞–º–∏</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <!-- –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ -->
                    <div class="col-md-6">
                        <form th:action="@{/cash/deposit}" method="post" th:object="${cashForm}" class="mb-3">
                            <label class="form-label">–ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç</label>
                            <div class="input-group">
                                <input type="number" 
                                       class="form-control" 
                                       th:field="*{amount}"
                                       placeholder="–°—É–º–º–∞" 
                                       step="0.01" 
                                       min="0.01"
                                       required>
                                <span class="input-group-text">‚ÇΩ</span>
                                <button type="submit" class="btn btn-success">
                                    ‚ûï –ü–æ–ª–æ–∂–∏—Ç—å
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- –°–Ω—è—Ç–∏–µ -->
                    <div class="col-md-6">
                        <form th:action="@{/cash/withdraw}" method="post" th:object="${cashForm}">
                            <label class="form-label">–°–Ω—è—Ç—å —Å–æ —Å—á–µ—Ç–∞</label>
                            <div class="input-group">
                                <input type="number" 
                                       class="form-control" 
                                       th:field="*{amount}"
                                       placeholder="–°—É–º–º–∞" 
                                       step="0.01" 
                                       min="0.01"
                                       required>
                                <span class="input-group-text">‚ÇΩ</span>
                                <button type="submit" class="btn btn-warning">
                                    ‚ûñ –°–Ω—è—Ç—å
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ü–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥ -->
        <div class="card mb-4 shadow-sm">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">üí∏ –ü–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥</h5>
            </div>
            <div class="card-body">
                <form th:action="@{/transfer}" method="post" th:object="${transferForm}">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">–ü–æ–ª—É—á–∞—Ç–µ–ª—å</label>
                            <select class="form-select" 
                                    th:field="*{toUsername}"
                                    required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è...</option>
                                <option th:each="acc : ${pageModel.availableAccounts}" 
                                        th:value="${acc.username}" 
                                        th:text="${acc.fullName + ' (' + acc.username + ')'}">
                                    –ò–º—è (username)
                                </option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">–°—É–º–º–∞</label>
                            <div class="input-group">
                                <input type="number" 
                                       class="form-control" 
                                       th:field="*{amount}"
                                       placeholder="–°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞" 
                                       step="0.01" 
                                       min="0.01"
                                       required>
                                <span class="input-group-text">‚ÇΩ</span>
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-info text-white">
                        üöÄ –ü–µ—Ä–µ–≤–µ—Å—Ç–∏
                    </button>
                </form>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-muted mt-5 mb-3">
            <small>
                My Bank Application ¬© 2024 | 
                –õ–æ–≥–∏–Ω: <strong th:text="${pageModel.account.username}">username</strong>
            </small>
        </footer>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
